


<!DOCTYPE html>
<html>
  <head>
    <title>tournaments Page</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>

	<script src="https://unpkg.com/leaflet-geosearch@2.2.0/dist/bundle.min.js"></script>
	<style type="text/css">
      #map 	{
				width: 600px;
				height: 400px;
			}
    </style>
	</head>
<!-- Head, imports of Leaflet CSS and JS, Geosearch JS, etc -->
<!-- 11 mai 10h56 -->
<body>
<div id='map'></div>


<script>

var query_addr = "Paris";
// Get the provider, in this case the OpenStreetMap (OSM) provider.
var provider = new window.GeoSearch.OpenStreetMapProvider()
// Query for the address
var query_promise = provider.search({ query: query_addr});
// Wait until we have an answer on the Promise
// Initialize map to specified coordinates

query_promise.then( value => {
   for(i=0;i < 1; i++){
     // Success!
	var x_coor = value[i].x;
    var y_coor = value[i].y;
	var label = value[i].label;
	var map = L.map( 'map', {
		center: [y_coor,x_coor], // CAREFULL!!! The first position corresponds to the lat (y) and the second to the lon (x)
		zoom: 5
	});
	// Add tiles (streets, etc)
	L.tileLayer( 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
		subdomains: ['a','b','c']
	}).addTo( map );
	 	 
     //var label = value[i].label;
     // Create a marker for the found coordinates
     //var marker = L.marker([y_coor,x_coor]).addTo(map) // CAREFULL!!! The first position corresponds to the lat (y) and the second to the lon (x)
     // Add a popup to said marker with the address found by geosearch (not the one from the user)
     //marker.bindPopup("<b>Found location</b><br>"+label).openPopup();
	 
	 {%for i in range(0, len)%} 
		var marker = L.marker([{{tournois[i].lat}},{{tournois[i].longg}}]).addTo(map) // CAREFULL!!! The first position corresponds to the lat (y) and the second to the lon (x)
	{%endfor%} 
     // Add a popup to said marker with the address found by geosearch (not the one from the user)
	//marker.bindPopup("<b>Found location</b><br>"+label).openPopup();
	//L.marker([50.85,4.349]).addTo(map)
   };
}, reason => {
  console.log(reason); // Error!
} );

</script>

	<table border=3><tr><th>Start date</th><th>Nom</th><th>game System</th><th>city</th></tr>'
		{%for i in range(0, len)%} 
			<tr>
					<td> {{tournois[i].startDate}} 		</td>
					<td> <a href="/tournois/{{tournois[i].id}}"><img src="/static/images/info50px.jpg" alt="infos"/></a>{{tournois[i].tournamentName}} </td>
					<td> {{tournois[i].gameSystem}} 	</td>
					<td> {{tournois[i].city}} 			</td>
			</tr>
		{%endfor%} 
	</table>

</body>
</html>


